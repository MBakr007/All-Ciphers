/// FCI – Programming 1 – 2018 - Assignment 2
/// Program Name: all ciphers
/// Last Modification Date: 1/3/2018
/// Author1 and ID and Group: Muhammad Bakr Abdel Hafez Muhammad / G9 / 20170224
/// Author2 and ID and Group: Muhammad Al-Taher Abdel Hamid / G9 / 20170223
/// Author3 and ID and Group: Mahmoud Magdy Ahmed / G10 / 20170269
/// Author4 and ID and Group: Muhammad Gamal Hassaan / G9 / 20170225
/// Teaching Assistant:
/// Purpose: cipher messages
#include <iostream>

using namespace std;
int pow(int base , int power)
{
    int res=1;
    for(int i=0; i<power ; i++ )
    {
        res=res*base;
    }
    return res;
}
int main()
{
    cout<<"Ahlan ya user ua habibi. "<<endl;
    cout<<"What do you like to do today? "<<endl;
    cout<<"1- Cipher a message"<<endl;
    cout<<"2- Decipher a message"<<endl;
    cout<<"3- End "<<endl;
    int n;
    cout<<">> ";
    cin>>n;
    if (n == 1)
    {
        string arrayOfletters="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        string name ;
        int num ;
        int arr[5];
        cout<<"Please enter the message to cipher: ";
        cin.ignore();
        getline(cin, name);
        for(int i=0; i<name.size(); i++)
        {
            if (name[i]>=97)
            {
                name[i]-=32;
            }
        }
        for(int i=0 ; i<name.size(); i++)
        {
            for(int j=0 ; j<26 ; j++)
            {
                if (name[i]==arrayOfletters[j])
                {
                    name[i]=int(name[i])-65;
                    num=name[i];
                    for( int k=0 ; k<5 ; k++)
                    {
                        if(num%2==1)
                        {
                            arr[k]=1;
                        }
                        else
                        {
                            arr[k]=0;
                        }
                        num/=2;
                    }
                    for(int q=0; q<5; q++)
                    {
                        if (arr[q]==1)
                        {
                            arr[q]='b';
                        }
                        else if (arr[q]==0)
                        {
                            arr[q]='a';
                        }
                    }
                    for(int i=4; i>=0; i--)
                    {
                        cout<<char(arr[i]);
                    }
                }
            }
            if(name[i]== char(32))
            {
                cout<<" ";
            }
        }
    }
    if(n==2)
    {
        string name;
        int arr[5], q=0, sum=0;
        cout<<"Please enter the message to decipher : ";
        cin>>name;
        char test[name.size()];
        for(int i=0; i<name.size(); i++)
        {
            if (name[i]>=97)
            {
                name[i]-=32;
            }
        }
        for(int i=0; i<name.size() ; i+=5)
        {
            if(name[i]==char(32))
            {
                cout<<" ";
                i++;
            }
            for(int j=i; j<i+5 ; j++)
            {
                test[j]=name[j];
            }
            for(int k=i; k<(i+5) ; k++)
            {
                if(test[k]=='A')
                {
                    arr[k-(i)]=0;
                }
                else if (test[k]=='B')
                {
                    arr[k-(i)]=1;
                }
            }
            for (int w=4 ; w>=0 ; w--)
            {
                arr[w]*=pow(2,q);
                q++;
            }

            for(int x=0; x<5 ; x++)
            {
                sum+=arr[x];
            }
            cout<<char(sum+65);
            for(int s=0 ; s<5 ; s++)
            {
                arr[s]=0;
            }
            sum=0;
            q=0;
        }


    }
    return 0;
}
